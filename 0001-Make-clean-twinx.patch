From 6d6eab3e9df14815107315316f6aca700ab4d19f Mon Sep 17 00:00:00 2001
From: debbuild <debbuild>
Date: Thu, 2 Aug 2018 19:55:40 +0200
Subject: [PATCH 1/2] Make clean twinx.

---
 twinx.w | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/twinx.w b/twinx.w
index 72da711..e92d41f 100644
--- a/twinx.w
+++ b/twinx.w
@@ -8,11 +8,14 @@ the form `\.{\\def\\title\{NAME\}}'.
 
 @c
 #include <stdio.h>
+#include <stdlib.h>
+#include <string.h>
+#include <ctype.h>
 @<Type definitions@>@;
 @<Global variables@>@;
 @<Procedures@>@;
 @#
-main(argc,argv)
+int main(argc,argv)
   int argc;
   char *argv[];
 { @<Local variables@>;
@@ -376,7 +379,7 @@ collate[0]=0; strcpy(collate+1,"} \1\2\3\4\5\6\7\10\11\12\13\14\15\16\17\
 !\42#$%&'()*+,-./:;<=>?@@[\\]^`{|~_\
 abcdefghijklmnopqrstuvwxyz0123456789");
 {@+register int j;
-  for (j=1;collate[j];j++) ord[collate[j]]=j;
+  for (j=1;collate[j];j++) ord[(int)collate[j]]=j;
   ord[128]=j; /* this affects the ordering of |sentinel.id| */
   for (j='A';j<='Z';j++) ord[j]=ord[tolower(j)];
 }
@@ -387,7 +390,7 @@ the order when printing. After this procedure has acted, the field
 |q->data.n| should not be considered an active pointer.
 
 @<Proc...@>=
-collapse(p,q)
+void collapse(p,q)
   node *p,*q;
 {@+register node *x;
   for (x=q->data.n;x->next;x=x->next) ;
-- 
2.18.0

